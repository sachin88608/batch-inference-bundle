bundle:
  name: batch_inference_bundle

workspace:
  host: https://adb-3663190007330585.5.azuredatabricks.net
  file_path: /Workspace/Users/${workspace.current_user.userName}/batch-inference-bundle

targets:
  dev:
    default: true
    workspace:
      host: https://adb-3663190007330585.5.azuredatabricks.net
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/dev
    resources:
      jobs:
        batch_inference_job:
          name: batch_inference_job-${bundle.target}
          run_as:
            user_name: sachingupta88608_gmail.com#ext#@sachingupta88608gmail.onmicrosoft.com
          schedule:
            quartz_cron_expression: "0 0 */12 * * ?"
            timezone_id: "Asia/Kolkata"
            pause_status: PAUSED  # or PAUSED/UNPAUSED, as needed
          tasks:
            - task_key: ingest_raw
              existing_cluster_id: 1201-072204-0994tuor
              notebook_task:
                notebook_path: ${workspace.file_path}/src/notebooks/01_ingest_raw
                source: WORKSPACE
            - task_key: feature_engineering
              depends_on:
                - task_key: ingest_raw
              existing_cluster_id: 1201-072204-0994tuor
              notebook_task:
                notebook_path: ${workspace.file_path}/src/notebooks/02_feature_engineering
                source: WORKSPACE
            - task_key: batch_inference
              depends_on:
                - task_key: feature_engineering
              existing_cluster_id: 1201-072204-0994tuor
              notebook_task:
                notebook_path: ${workspace.file_path}/src/notebooks/03_batch_inference
                source: WORKSPACE

sync:
  paths:
    - src
    - data
    - databricks.yml
